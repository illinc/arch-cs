\scriptsize
\tikzstyle{blockarrow}	= [-latex',draw]
% \footnotesize
\scriptsize
\begin{tikzpicture}[
start chain=Mem going below,
% every on chain/.style=join,
% every on chain/.style=solidchaincell,
% every join/.style=blockarrow,
node distance=4ex and 8ex,
baseline=(current bounding box.north)
]
\tikzstyle{block}	= [text width=10ex,text badly centered, minimum height=4ex, draw=black]

\tikzstyle{reg}	= [block,  fill=clRegisterLight]
\tikzstyle{alu}	= [block,  fill=clCalcLight, text width=20ex]
\tikzstyle{mem}	= [reg,  fill=clMemoryLight]

\tikzstyle{reglabel}	= [block,  draw=none, node distance=0ex and 8ex, text=clRegisterDark]
\tikzstyle{memlabel}	= [reglabel, text=clMemoryDark]

\node[mem, on chain=Mem]  (s1) {};
\node[mem,solidchaincell,on chain=Mem]  {};
\node[mem,solidchaincell,on chain=Mem]  {};
\node[mem,solidchaincell,on chain=Mem] (sCurrent) {};
  \tikzstyle{mem}	= [block]
\node[mem,solidchaincell,on chain=Mem]  {};
\node[mem,solidchaincell,on chain=Mem]  {};
\node[mem,solidchaincell,on chain=Mem]  {};
\node[mem,solidchaincell,on chain=Mem]  {};


\node[memlabel,above= of s1.north east]   {0};
\node[memlabel,above= of s1.north west]   {31};

\node[reglabel,right= of s1, text width=24ex]  (bottom)  {Дно стека \mbox{(начальное значение $sp$)}};

\coordinate[right=of sCurrent]  (from_sp);
\coordinate[above=of from_sp]  (pop);
\coordinate[below=of from_sp]  (push);

% \node[reg, right=of from_sp]  (sp) {esp/sp};
% \node[reglabel,right= of sp]   {Вершина стека};
\node[reglabel,right= 12ex of from_sp] (top)  {Вершина стека};
% \node[right = 6ex of from_sp-|pop.east, reglabel, anchor=west] (top)  {Вершина стека};

\node[reg, right=6ex of top]  (sp) {$sp$}; %{$esp/sp$};

% \path[blockarrow] (bottom) -- (s1);
\path[blockarrow] (bottom-|sp.west) -- (s1);

\path[blockarrow] (sp) -- (sCurrent);
\path[blockarrow] (from_sp) -- node[right] {pop} (pop);
\path[blockarrow] (from_sp) -- node[right] {push} (push);
\end{tikzpicture}