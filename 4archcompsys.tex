\title{Архитектура вычислительных систем}

\newcommand\Att{AT\&T}

\newcommand\EAX{\lstinline!EAX!}
\newcommand\EBX{\lstinline!EBX!}
\newcommand\ECX{\lstinline!ECX!}
\newcommand\EDX{\lstinline!EDX!}


\newcommand\ESP{\lstinline!ESP!}

\newcommand\ESI{\lstinline!ESI!}

\nmsNewName{\Competencia}{\termin{ОПК-2.2}	Знание и~понимание архитектуры и~принципов построения вычислительных систем}


\def\Byte(#1,#2,#3,#4,#5,#6,#7,#8){
\node [rectangle split,rectangle split parts=8, rectangle split horizontal,draw ] at (2,2)
{\nodepart{one}#1\nodepart{two}#2\nodepart{three}#3\nodepart{four}#4\nodepart{five}#5\nodepart{six}#6\nodepart{seven}#7\nodepart{eight}#8};
}

\newcommand\mathlst[1]{\text{\lstinline!#1!}}

\lstset{language=C++}


%% far from complete list of gasm-specific keywords and instructions in AT&T syntax
% \lstdefinelanguage[x86gas]{Assembler}[x86masm]{Assembler}{%
%     ,morekeywords={rax,rbx,rcx,rdx,rip,rdi,rsi,rsp,subq,decl,movq,movl,xorl,imull,popq}%
%     ,morekeywords=[2]{.file,.section,.string,.text,.globl,.cfi_startproc,.cfi_def_cfa_offset,.cfi_endproc,.size,.ident}%
%     ,morecomment=[s][\color{olive}]{\%}{x}%
%     ,morecomment=[s][\color{olive}]{\%}{l}%
%     ,morecomment=[s][\color{olive}]{\%}{h}%
% %     ,morecomment=[s][\color{olive}]{\%}{ }%
%     ,morecomment=[s][\color{olive}]{\%}{,}%
%     ,morecomment=[s][\color{olive}]{\%}{)}%
% %     ,morecomment=[l][\color{olive}]{\%}%
% }

\lstdefinelanguage[x86gas]{Assembler}
{%
 keywords=[1]{\%, \$},
 keywordstyle=[1]\color{olive}
    ,morekeywords=[2]{.file,.section,.string,.text,.globl,.cfi_startproc,.cfi_def_cfa_offset,.cfi_endproc,.size,.ident}%
    ,morekeywords={subr,divr}%
%     ,morekeywords={mov,movq,movl,xorl,imull,popq}%
%     ,morecomment=[s][\color{olive}]{\%}{x}%
%     ,morecomment=[s][\color{olive}]{\%}{l}%
%     ,morecomment=[s][\color{olive}]{\%}{h}%
%     ,morecomment=[s][\color{olive}]{\%}{i}%
%     ,morecomment=[s][\color{olive}]{\%}{p}%
%     ,morecomment=[s][\color{olive}]{\%}{s}%
}




\lstnewenvironment{ccol}[1][]{\lstset{language=c,#1}}{}
\lstnewenvironment{acol}[1][]{\lstset{language=[x86gas]Assembler,#1}}{}

% \lstset{language=[x86gas]Assembler}
% \lstset{language=C++, alsolanguage=[x86masm]Assembler}
% \lstset{language=C++, alsolanguage=[x86gas]Assembler}

\lstset{language=C++}



\definecolor{blue(ncs)}{rgb}{0.0, 0.53, 0.74}
% \colorlet{clRegisterDark}{olive}
% \colorlet{clMemoryDark}{blue(ncs)}
% 
% \colorlet{clRegisterLight}{clRegisterDark!40!white}
% \colorlet{clMemoryLight}{clMemoryDark!20!white}
% \colorlet{clCalcLight}{yellow!40!white}

\newcommand{\Reg}[1]{{\textcolor{clRegisterDark}{#1}}}

\newcommand{\mathReg}[1]{\text{\Reg{\texttt{#1}}}}

% http://latexcolor.com/
\definecolor{calpolypomonagreen}{rgb}{0.12, 0.3, 0.17}
\definecolor{cadetblue}{rgb}{0.37, 0.62, 0.63}
\definecolor{ferngreen}{rgb}{0.31, 0.47, 0.26}
\definecolor{glaucous}{rgb}{0.38, 0.51, 0.71}	
\definecolor{intelblue}{HTML}{0071c5}

% \colorlet{colorIntel}{intelblue}
% \colorlet{colorGas}{magenta}
% \newcommand{\onlyIntel}[1]{{\color{colorIntel}{Intel: #1}}}
% \newcommand{\onlyGas}[1]{{\color{colorGas}{GAS: #1}}}
\newcommand{\onlyIntel}[1]{{\color{clIntel}{Intel: #1}}}
\newcommand{\onlyGas}[1]{{\color{clGas}{GAS: #1}}}



\newcommand{\RN}[1]{\ensuremath{\mathrm{#1}}}
\newcounter{romannumberx}
\def\ToRomanEmpire#1{\setcounter{romannumberx}{#1}\Roman{romannumberx}}
\newcommand{\hex}[1]{\ensuremath{\mathtt{#1}}}

\providecommand{\ethm}[1]{{\emph{\textcolor{clEthimology}{#1}}}}

\providecommand{\stdcppsec}[1][]{[\textbf{#1}]}


\newcommand{\nondecdigit}[1]{\lapbox[\digitwidth]{0.06\digitwidth}{\ensuremath{\mathrm{\resizebox*{1.12\digitwidth}{\digitheight}{#1}}}}}
\newcommand{\digitA}{\nondecdigit{A}}
\newcommand{\digitB}{\nondecdigit{B}}
\newcommand{\digitC}{\nondecdigit{C}}
\newcommand{\digitD}{\nondecdigit{D}}
\newcommand{\digitE}{\nondecdigit{E}}
\newcommand{\digitF}{\nondecdigit{F}}


% \DeclareMathOperator{\And}{and} уже определён как & (не в common!)
\DeclareMathOperator{\Or}{|}
\DeclareMathOperator{\Xor}{\hat{~}}
\DeclareMathOperator{\Not}{!}
\DeclareMathOperator{\Neg}{neg}

\DeclareMathOperator{\AND}{and}
\DeclareMathOperator{\OR}{or}
\DeclareMathOperator{\XOR}{xor}
\DeclareMathOperator{\NOT}{not}
\DeclareMathOperator{\NEG}{neg}



\newcommand{\usecopeq}{%
  \mathcode`+=\numexpr\mathcode`+ + "1000\relax % turn + into a relation
  \mathcode`-=\numexpr\mathcode`- + "1000\relax
  \mathcode`*=\numexpr\mathcode`* + "1000\relax
  \mathcode`/=\numexpr\mathcode`/ + "1000\relax
}

\newcounter{risletter}

